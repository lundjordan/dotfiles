#######################################
# shortcut aliases and functions
#######################################

#############
#temp aliases
#############
alias cdr='cd ~/projects/rails/gratitude'


#############
#permanent aliases
#############

# yum alias's
alias yi='sudo yum install'
alias yr='sudo yum remove'
alias yu='sudo yum update'
alias ys='yum search'

####### Configs
# source zsh
alias sz='. ~/.zshrc'
# alias's to dirs
alias cdot='cd ~/bin/dotfiles'
# alias to aliases
alias via='vim /home/jlund/bin/dotfiles/bash/aliases'
# my zsh config
alias vic='vim /home/jlund/bin/dotfiles/zsh/config'
# my zsh config
alias vie='vim /home/jlund/bin/dotfiles/bash/env'
# alias to vimrc
alias vimrc='vim ~/.vimrc'
########
#
# pydump practice
alias pydump='vim ~/tmp/pydump.py'
alias ppydump='python ~/tmp/pydump.py'
#
# raspberry pi
alias moshw='mosh jlund@99.231.116.249'
alias moshl='mosh jlund@192.168.0.145'
alias moshwp='mosh pi@99.231.116.249'
alias moshlp='mosh pi@192.168.0.145'
alias sshl='ssh jlund@192.168.0.145'
alias sshwp='ssh pi@99.231.116.249'
alias sshlp='ssh pi@192.168.0.145'
alias sshw='ssh jlund@99.231.116.249 -R 4222:localhost:4222'
alias sshl='ssh jlund@192.168.0.145 -R 4222:localhost:4222'

# reattach screen
alias rs='screen -raAd'

# irssi notifier
alias irs='/home/jlund/opensrc/github/irssi-over-ssh-notifications/irssi-notify-listener.py'

# GREP_COLOR=bright yellow on black bg.
# use GREP_COLOR=7 to highlight whitespace on black terminals
# LANG=C for speed. See also: http://www.pixelbeat.org/scripts/findrepo
alias grep='GREP_COLOR="1;33;40" LANG=C grep --color=auto'

alias ls="BLOCK_SIZE=\'1 ls --color=auto" #enable thousands grouping and colour
alias minicom='minicom -c on' #enable colour
alias units='units -t' #terse mode
alias diff='LC_ALL=C TZ=GMT0 diff -Naur' #normalise diffs for distribution
#alias lynx='lynx -force_html -width=$COLUMNS' #best settings for viewing HTML
alias links='links -force-html' #need to enable colour in config menu manually
alias xterm='xterm -fb "" -bg black -fg gray -fa "Sans Mono" -fs 9 +sb -sl 3000 -g 80x50+1+1'
#alias vim='vim -X' #don't try to contact xserver (which can hang on networkissues)
#alias gdb='gdb -tui -quiet' #enable the text window interface if possible
alias head='head -n $((${LINES:-12}-2))' #as many as possible without scrolling
alias tail='tail -n $((${LINES:-12}-2)) -s.1' #Likewise, also more responsive -f

alias ..="cd .."        #go to parent dir
alias ...="cd ../.."    #go to grandparent dir
alias ....="cd ../../.."    #go to grandparent dir
alias .....="cd ../../../.."    #go to grandparent dir
alias cdd="cd -"       #go to previous dir
alias l.='ls -d .*'     #list hidden files
alias ll='ls -lhrt'     #extra info compared to "l"
alias lld='ls -lUd */'  #list directories

alias pip="python-pip"

# git alias's
alias gl="git log --pretty=format:'%h - %an, %ar : %s' --graph"
alias gst="git status --short"
alias gba="git branch -a"
alias gcam="git commit -am"
alias gcm="git commit -m"
alias gco="git checkout"
alias gmum="git merge upstream/master"

# git-hg alias's
alias hgpp='hg pull -u git; hg push'

# in global git: unstage='git reset HEAD --'

# what is my ip address
alias myip="curl -s http://whatismyip.org/"

# stack the resulting files that grep outputs into seperate panes in vim ;)
# grim () { grep -ril 

# what most people want from od (hexdump)
alias hd='od -Ax -tx1z -v'

# canonicalize path (including resolving symlinks)
alias realpath='readlink -f'

# make and change to a directory
md () { mkdir -p "$1" && cd "$1"; }

# make and change to a directory
catl () { cat "$1" | less; }

# print the corresponding error message
strerror() { python -c "\
import os,locale as l; l.setlocale(l.LC_ALL, ''); print os.strerror($1)"; }

# quick plot of numbers on stdin. Can also pass plot params.
# E.G: seq 1000 | sed 's/.*/s(&)/' | bc -l | plot linecolor 2
plot() { { echo 'plot "-"' "$@"; cat; } | gnuplot -persist; }

# highlight occurences of expression
hili() { e="$1"; shift; grep --col=always -Eih "$e|$" "$@"; }
# Ditto, but user pager ('n' to iterate)
scan() { e="$1"; shift; less -i -p "*$e" "$@"; }

# Make these functions, common to other languages, available in the shell
ord() { printf "0x%x\n" "'$1"; }
chr() { printf $(printf '\\%03o\\n' "$1"); }

# Mozilla functions

function viba ()
{
        cd ~/devel/mozilla/dirtyBuildRepos-git/
        vim -S vimbackup.vim
}
function mozgithg ()
{
        start_dir=`pwd`
        cd ~/devel/mozilla/dirtyBuildRepos-git/mozharness/
    if [ $1 ]
    then
        echo "#### committing changes in local git repo..."
        git commit -am $1
    else
        echo "%%%% Warning, not attempting to commit any new changes"
    fi
        echo "#### pushing changes to remote origin..."
        git push
        cd ~/devel/mozilla/user-repo/mozharness/
        echo "#### pulling git changes into hg repo..."
        hg pull -u git+ssh://git@github.com:lundjordan/mozharness.git
        echo "#### pushing changes in hg repo to hg.mozilla.org user_repo..."
        hg push
        cd $start_dir
        echo "#### complete!"
}

# Mozilla alias's
alias mozenv='source ~/virtualenvs/bbot/bin/activate'
alias mozvim='cd ~/devel/mozilla/dirtyBuildRepos-git/ && vim -S vimbackup.vim'
alias char='cd ~/devel/mozilla/dirtyBuildRepos-git/mozharness'
alias cbc='cd ~/devel/mozilla/cleanBuildRepos-hg'
alias cdir='cd ~/devel/mozilla/dirtyBuildRepos-git'
alias cus='cd ~/devel/mozilla/user-repo/mozharness/'
alias sshp='ssh people.mozilla.org'
alias sshm="ssh -t jlund@dev-master01.build.scl1.mozilla.com 'cd /builds/buildbot/jlund/tests-master; exec zsh'"
alias sendchange='python ~/devel/mozilla/armen/github-arm/playground/mozilla/scripts/sendchanges.py'
alias vsendchange='vim ~/devel/mozilla/armen/github-arm/playground/mozilla/scripts/sendchanges.py'
alias diffharn='git diff > ~/devel/mozilla/patches/mozharness_patch.diff'
alias impharn='hg import ~/devel/mozilla/patches/mozharness_patch.diff'
alias vitc='vim /home/jlund/devel/mozilla/dirtyBuildRepos-git/buildbot-configs/mozilla-tests/config.py'
