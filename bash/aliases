#######################################
# shortcut aliases and functions
#######################################

#############
#temp aliases
#############
alias cdr='cd ~/projects/rails/gratitude'


#############
#permanent aliases
#############

#zsh aliases
alias vubnotes='vim ~/bin/dotfiles/notes/ubuntu_fresh_install.md'

#zsh aliases
alias vzshrc='vim ~/.zshrc'

# yum alias's
alias yi='sudo yum install'
alias yr='sudo yum remove'
alias yu='sudo yum update'
alias ys='yum search'

# apt-get alias's
# alias ai='sudo apt-get install'
# alias ar='sudo apt-get remove'
# alias au='sudo apt-get update && sudo apt-get upgrade'

# trello alias's
# alias trello='. ~/.run_trello_with_creds trello'
# alias t_note='trello card create -b 5575e96ed5af09aa2221c4b4 -l 55b914d4dbf0ea6e0e37765e'
# alias t_triage='trello card create -b 5575e96ed5af09aa2221c4b4 -l 5575fcc06c11219ec5f47e29'
# alias t_current='trello card create -b 5575e96ed5af09aa2221c4b4 -l 5575e9beb4497bb77b045710'
# alias t_next='trello card create -b 5575e96ed5af09aa2221c4b4 -l 5575e9c93baae54a5a73145a'

# taskwarrior alias's
alias tstw='task due:today project:warrior'
alias tsaw='task project:warrior'
alias taaw='task add priority:M project:warrior'
alias tatw='task add priority:M due:today project:warrior'

alias tstm='task due:today project:mozharness'
alias tsam='task project:mozharness'
alias taam='task add priority:M project:mozharness'
alias tatm='task add priority:M due:today project:mozharness'

alias tstp='task due:today project:promotion'
alias tsap='task project:promotion'
alias tatp='task add priority:H due:today project:promotion'
alias taap='task add priority:H project:promotion'

alias tstd='task due:today project:releaseduty'
alias tsad='task project:releaseduty'
alias tatd='task add priority:H due:today project:releaseduty'
alias taad='task add priority:H project:releaseduty'

alias tstr='task due:today project:reviews'
alias tsar='task project:reviews'
alias tatr='task add priority:H due:today project:reviews'
alias taar='task add priority:H project:reviews'

alias tstc='task due:today project:tcmigration'
alias tsac='task project:tcmigration'
alias tatc='task add priority:H due:today project:tcmigration'
alias taac='task add priority:H project:tcmigration'

alias tsts='task due:today project:shipit'
alias tsas='task project:shipit'
alias tats='task add priority:H due:today project:shipit'
alias taas='task add priority:H project:shipit'

# alias tstl='task due:today project:loantool'
# alias tsal='task project:loantool'
# alias tatl='task add priority:H due:today project:loantool'
# alias taal='task add priority:H project:loantool'
# 
# alias tstb='task due:today project:mh-builds'
# alias tsab='task project:mh-builds'
# alias tatb='task add priority:M due:today project:mh-builds'
# alias taab='task add priority:M project:mh-builds'
# 
# alias tstw='task due:today project:wasabi'
# alias tsaw='task project:wasabi'
# alias tatw='task add priority:H due:today project:wasabi'
# alias taaw='task add priority:M project:wasabi'
# 
# alias tstd='task due:today project:buildduty'
# alias tsad='task project:buildduty'
# alias tatd='task add priority:M due:today project:buildduty'
# alias taad='task add priority:M project:buildduty'
# 
# alias tstv='task due:today project:vs2013'
# alias tsav='task project:vs2013'
# alias tatv='task add priority:M due:today project:vs2013'
# alias taav='task add priority:M project:vs2013'
# 
# alias tstx='task due:today project:blackbox'
# alias tsax='task project:blackbox'
# alias tatx='task add priority:M due:today project:blackbox'
# alias taax='task add priority:M project:blackbox'
# 
# alias tstk='task due:today project:apk'
# alias tsak='task project:apk'
# alias tatk='task add priority:M due:today project:apk'
# alias taak='task add priority:M project:apk'
# 
# alias tsth='task due:today project:hg-repos'
# alias tsah='task project:hg-repos'
# alias tath='task add priority:M due:today project:hg-repos'
# alias taah='task add priority:M project:hg-repos'

alias tata='task add due:today'
alias tt='task due:today'

alias tsar='task project:reviews'
alias tatr='task add priority:H due:today project:reviews'


####### Configs
# source zsh
alias sz='. ~/.zshrc'
# alias's to dirs
alias cdot='cd ~/bin/dotfiles'
# alias to aliases
alias via='vim ~/bin/dotfiles/bash/aliases'
# zsh alias shortcut
alias viaz='vim ~/bin/dotfiles/zsh/aliases'
# my zsh config
alias vic='vim ~/bin/dotfiles/zsh/config'
# my zsh config
alias vie='vim ~/bin/dotfiles/bash/env'
# alias to vimrc
alias vimrc='vim ~/.vimrc'
# alias to vimrc
alias vimnotes='vim ~/bin/dotfiles/notes/vim_cheat_sheet.txt'
########

# tmux
# alias tmux="TERM=screen-256color-bce tmux -2"
alias tmum="~/.tmux/tmux_mozilla"

# pydump practice
alias pydump='vim ~/tmp/pydump.py'
alias ppydump='python ~/tmp/pydump.py'
#

# raspberry pi
alias moshw='mosh 176.61.62.139'
alias moshl='mosh 192.168.1.16'
alias saws='ssh -i ~/.aws_keys/jlundAWS.pem ubuntu@ec2-54-214-245-108.us-west-2.compute.amazonaws.com -R 4222:localhost:4222'
# alias saws='ssh -i ~/.aws_keys/jlundAWS.pem ubuntu@ec2-54-214-245-108.us-west-2.compute.amazonaws.com'
# alias sshaws='ssh -i ~/.aws_keys/jlundAWS.pem ubuntu@ec2-54-214-245-108.us-west-2.compute.amazonaws.com'

# reattach screen
alias rs='screen -raAd'

# GREP_COLOR=bright yellow on black bg.
# use GREP_COLOR=7 to highlight whitespace on black terminals
# LANG=C for speed. See also: http://www.pixelbeat.org/scripts/findrepo
# alias grep='GREP_COLOR="1;33;40" LANG=C grep --color=auto'

# alias ls="BLOCK_SIZE=\'1 ls --color=auto" #enable thousands grouping and colour
# alias minicom='minicom -c on' #enable colour
alias units='units -t' #terse mode
alias diff='LC_ALL=C TZ=GMT0 diff -Naur' #normalise diffs for distribution
#alias lynx='lynx -force_html -width=$COLUMNS' #best settings for viewing HTML
# alias links='links -force-html' #need to enable colour in config menu manually
# alias xterm='xterm -fb "" -bg black -fg gray -fa "Sans Mono" -fs 9 +sb -sl 3000 -g 80x50+1+1'
#alias vim='vim -X' #don't try to contact xserver (which can hang on networkissues)
#alias gdb='gdb -tui -quiet' #enable the text window interface if possible
# alias head='head -n $((${LINES:-12}-2))' #as many as possible without scrolling
# alias tail='tail -n $((${LINES:-12}-2)) -s.1' #Likewise, also more responsive -f

# alias ..="cd .."        #go to parent dir
# alias ...="cd ../.."    #go to grandparent dir
# alias ....="cd ../../.."    #go to grandparent dir
# alias .....="cd ../../../.."    #go to grandparent dir
# alias cdd="cd -"       #go to previous dir
alias l.='ls -d .*'     #list hidden files
alias ll='ls -lhrt'     #extra info compared to "l"
alias lld='ls -lUd */'  #list directories

# alias pip="python-pip"

# git alias's
alias glo="git log --pretty=format:'%h - %an, %ar : %s' --graph"
# alias gp="git push"
# alias gst="git status --short"
# alias gf="git fetch"
# alias gm="git merge"
# alias gba="git branch -a"
# alias gcam="git commit -am"
# alias gca="git commit -a"
# alias gco="git checkout"
# alias gcob="git checkout -b"
# alias gmum="git merge upstream/master"

# cmus aliases
alias cmp="cmus-remote -p"
alias cmu="cmus-remote -u"
alias cmr="cmus-remote -r"
alias cmn="cmus-remote -n"

# git-hg alias's
alias hgpp='hg pull -u git; hg push'

# in global git: unstage='git reset HEAD --'

# what is my ip address
# alias myip="curl -s http://whatismyip.org/"

# stack the resulting files that grep outputs into seperate panes in vim ;)
# grim () { grep -ril 

# what most people want from od (hexdump)
alias hd='od -Ax -tx1z -v'

# canonicalize path (including resolving symlinks)
alias realpath='readlink -f'

# make and change to a directory
# md () { mkdir -p "$1" && cd "$1"; }
# this doesn't play well with oh-my-zsh as zsh has an md alias and both
# combined makes an infinite loop

# cat arg1 and pipe output to less
catl () { cat "$1" | less; }

# grep with color, context of 3 lines, and pipe through less
# grel () {grep --color=always -rnC 3 "$1" . | less -R}

# print the corresponding error message
strerror() { python -c "\
import os,locale as l; l.setlocale(l.LC_ALL, ''); print os.strerror($1)"; }

# quick plot of numbers on stdin. Can also pass plot params.
# E.G: seq 1000 | sed 's/.*/s(&)/' | bc -l | plot linecolor 2
plot() { { echo 'plot "-"' "$@"; cat; } | gnuplot -persist; }

# highlight occurences of expression
hili() { e="$1"; shift; grep --col=always -Eih "$e|$" "$@"; }
# Ditto, but user pager ('n' to iterate)
scan() { e="$1"; shift; less -i -p "*$e" "$@"; }

# Make these functions, common to other languages, available in the shell
ord() { printf "0x%x\n" "'$1"; }
chr() { printf $(printf '\\%03o\\n' "$1"); }

function hist () # history of everything if no args[0]. if args[0], grep it
{
    if [ $1 ]
    then
        history 1 -1 | grep "$1" | vim -R -
    else
        history 1 -1 | vim -R -
    fi
}

# Mozilla functions

function peop ()
{
        filename=$(basename $1)
        scp $1 people.mozilla.org:public_html/
        echo "http://people.mozilla.org/~jlund/${filename}"
}

function viba ()
{
        cd ~/devel/mozilla/dirtyRepos-git/
        vim -S vimbackup.vim
}


function hggit-talos ()
{
        start_dir=`pwd`
        cd ~/devel/mozilla/dirtyRepos/talos_jlund/
    if [ $1 ]
    then
        echo "#### committing changes in local git repo..."
        gca -m $1
    else
        echo "%%%% Warning, not attempting to commit any new changes"
    fi
        echo "#### pushing changes to remote origin..."
        git push
        cd ~/devel/mozilla/userRepos/build-talos/
        echo "#### pulling git changes into hg repo..."
        echo "git://github.com/lundjordan/build-talos.git"
        hg pull -u git://github.com/lundjordan/build-talos.git
        echo "#### pushing changes in hg repo to hg.mozilla.org user_repo..."
        hg push -f
        cd $start_dir
        unset start_dir
        echo "#### complete!"
}

function hggit-tools ()
{
        start_dir=`pwd`
        cd ~/devel/mozilla/dirtyRepos/git/tools_jlund/
    if [ $1 ]
    then
        echo "#### committing changes in local git repo..."
        gca -m $1
    else
        echo "%%%% Warning, not attempting to commit any new changes"
    fi
        echo "#### pushing changes to remote origin..."
        git push
        cd ~/devel/mozilla/userRepos/tools/
        echo "#### pulling git changes into hg repo..."
        hg pull -u git://github.com/lundjordan/build-tools.git
        echo "#### pushing changes in hg repo to hg.mozilla.org user_repo..."
        hg push -f
        cd $start_dir
        unset start_dir
        echo "#### complete!"
}

function hggit-slaveapi ()
{
        start_dir=`pwd`
        cd ~/devel/mozilla/dirtyRepos/slaveapi_jlund/
    if [ $1 ]
    then
        echo "#### committing changes in local git repo..."
        gca -m $1
    else
        echo "%%%% Warning, not attempting to commit any new changes"
    fi
        echo "#### pushing changes to remote origin..."
        git push
        cd ~/devel/mozilla/userRepos/slaveapi
        echo "#### pulling git changes into hg repo: ~/devel/mozilla/userRepos/slaveapi"
        hg pull -u git://github.com/lundjordan/slaveapi.git
        echo "#### pushing changes in hg repo to hg.mozilla.org user_repo with `hg push -f`"
        hg push -f
        cd $start_dir
        unset start_dir
        echo "#### complete!"
}

function hggit-mhbuilds ()
{
        start_dir=`pwd`
        cd ~/devel/mozilla/dirtyRepos/mozharness_jlund/
    if [ $1 ]
    then
        echo "#### committing changes in local git repo..."
        gca -m $1
    else
        echo "%%%% Warning, not attempting to commit any new changes"
    fi
        echo "#### pushing changes to remote origin..."
        git push
        cd ~/devel/mozilla/userRepos/mozharness
        echo "#### pulling git changes into hg repo: ~/devel/mozilla/userRepos/mozharness"
        hg pull -u git://github.com/lundjordan/mozharness.git
        echo "#### pushing changes in hg repo to hg.mozilla.org user_repo with `hg push -f`"
        hg push -f
        cd $start_dir
        unset start_dir
        echo "#### complete!"
}

function hggit-mhmetro ()
{
        start_dir=`pwd`
        cd ~/devel/mozilla/dirtyRepos/mozharness/
    if [ $1 ]
    then
        echo "#### committing changes in local git repo..."
        gca -m $1
    else
        echo "%%%% Warning, not attempting to commit any new changes"
    fi
        echo "#### pushing changes to remote origin..."
        git push
        cd ~/devel/mozilla/userRepos/mozharness2/
        echo "#### pulling git changes into hg repo..."
        hg pull -u git+ssh://git@github.com:lundjordan/mozharness.git
        echo "#### pushing changes in hg repo to hg.mozilla.org user_repo..."
        hg push -f
        cd $start_dir
        unset start_dir
        echo "#### complete!"
}

# Mozilla alias's
alias mozenv='source ~/virtualenvs/bbot/bin/activate'
alias mozvim='cd ~/devel/mozilla/dirtyRepos-git/ && vim -S vimbackup.vim'
alias char='cd ~/devel/mozilla/dirtyRepos-git/mozharness'
alias cbc='cd ~/devel/mozilla/cleanRepos-hg'
alias cdir='cd ~/devel/mozilla/dirtyRepos-git'
alias cus='cd ~/devel/mozilla/user-repo/mozharness/'
alias sshp='ssh people.mozilla.org'
alias sshm="ssh -t jlund@dev-master01.build.scl1.mozilla.com 'cd /builds/buildbot/jlund/tests-master; exec zsh'"
alias sendchange='python ~/devel/mozilla/misc/armen/github-arm/playground/mozilla/scripts/sendchanges.py'
alias vsendchange='vim ~/devel/mozilla/misc/armen/github-arm/playground/mozilla/scripts/sendchanges.py'
alias diffharn='git diff > ~/devel/mozilla/patches/mozharness_patch.diff'
alias impharn='hg import ~/devel/mozilla/patches/mozharness_patch.diff'
alias vitc='vim ~/devel/mozilla/dirtyRepos-git/buildbot-configs/mozilla-tests/config.py'
alias ssh-dev='ssh jlund@dev-master01.build.scl1.mozilla.com && tmux attach'

# DIT alias's

function patserv ()
{
        cd ~/devel/learn/patterns/starting/
        ruby server.rb
}

function vipa ()
{
        cd ~/devel/learn/patterns/starting/
        vim -S musicBackup.vim
}

# ps alias
alias psa="ps -ely | grep"

# snippet files
alias pysnips="vim ~/.vim/bundle/snipmate-snippets/snippets/python.snippets"

#node
alias devserv="~/devel/learn/final_project/goferIT/bin/devserv"
alias mocha="~/devel/learn/final_project/goferIT/bin/mocha"

# gofer
ggrel ()
{
    grep --color=always --exclude-dir coverage -rnC 6 "$1" . | less -R
}

alias linesOfGoferCode="find . -type d \( -name node_modules -o -name .git -o -name js -o -name css -o -name img -o -name .compiled_javascripts \) -prune -o -print | xargs wc -l | less"
